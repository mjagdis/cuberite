#include "MapPalette_1_8.h"

namespace MapPalette_1_8
{
	Byte MapColour(Byte a_Colour)
	{
		/** Maps the internal map colours to the colours available on clients
		using this protocol. Internally we use all colours available to the
		latest client version (or at least the latest we support). The mapping
		to the client supported colours uses a static table generated using a
		weighted RGB closest colour comparison with some manual tweaks. */
		static Byte Map[] =
		{
			/* [  0] = */   0,
			/* [  1] = */   1,
			/* [  2] = */   2,
			/* [  3] = */   3,
			/* [  4] = */   4,  // #597d27 -> #597d27
			/* [  5] = */   5,  // #6d9930 -> #6d9930
			/* [  6] = */   6,  // #7fb238 -> #7fb238
			/* [  7] = */   7,  // #435e1d -> #435e1d
			/* [  8] = */   8,  // #aea473 -> #aea473
			/* [  9] = */   9,  // #d5c98c -> #d5c98c
			/* [ 10] = */  10,  // #f7e9a3 -> #f7e9a3
			/* [ 11] = */  11,  // #827b56 -> #827b56
			/* [ 12] = */  12,  // #8c8c8c -> #8b8b8b
			/* [ 13] = */  13,  // #ababab -> #a9a9a9
			/* [ 14] = */  14,  // #c7c7c7 -> #c5c5c5
			/* [ 15] = */  15,  // #696969 -> #686868
			/* [ 16] = */  16,  // #b40000 -> #b40000
			/* [ 17] = */  17,  // #dc0000 -> #dc0000
			/* [ 18] = */  18,  // #ff0000 -> #ff0000
			/* [ 19] = */  19,  // #870000 -> #870000
			/* [ 20] = */  20,  // #7070b4 -> #7070b4
			/* [ 21] = */  21,  // #8a8adc -> #8a8adc
			/* [ 22] = */  22,  // #a0a0ff -> #a0a0ff
			/* [ 23] = */  23,  // #545487 -> #545487
			/* [ 24] = */  24,  // #757575 -> #757575
			/* [ 25] = */  25,  // #909090 -> #909090
			/* [ 26] = */  26,  // #a7a7a7 -> #a7a7a7
			/* [ 27] = */  27,  // #585858 -> #585858
			/* [ 28] = */  28,  // #005700 -> #005700
			/* [ 29] = */  29,  // #006a00 -> #006a00
			/* [ 30] = */  30,  // #007c00 -> #007c00
			/* [ 31] = */  31,  // #004100 -> #004100
			/* [ 32] = */  32,  // #b4b4b4 -> #b4b4b4
			/* [ 33] = */  33,  // #dcdcdc -> #dcdcdc
			/* [ 34] = */  34,  // #ffffff -> #ffffff
			/* [ 35] = */  35,  // #878787 -> #878787
			/* [ 36] = */  36,  // #737681 -> #737681
			/* [ 37] = */  37,  // #8d909e -> #8d909e
			/* [ 38] = */  38,  // #a4a8b8 -> #a4a8b8
			/* [ 39] = */  39,  // #565861 -> #565861

			// In Java Edition 1.8 dirt is closer to brown. If you allow clients
			// greater than 1.8 you probably want to map 1.8 to something like
			// everyone else sees. If you only have 1.8 clients you may prefer
			// identity mapping here.
			/* [ 40] = */ 106,  // #6a4c36 -> #664c33
			/* [ 41] = */  53,  // #825e42 -> #7b663e
			/* [ 42] = */  54,  // #976d4d -> #8f7748
			/* [ 43] = */ 104,  // #4f3928 -> #483524
			// /* [ 40] = */  40,
			// /* [ 41] = */  41,
			// /* [ 42] = */  42,
			// /* [ 43] = */  43,

			/* [ 44] = */  44,  // #4f4f4f -> #4f4f4f
			/* [ 45] = */  45,  // #606060 -> #606060
			/* [ 46] = */  46,  // #707070 -> #707070
			/* [ 47] = */  47,  // #3b3b3b -> #3b3b3b
			/* [ 48] = */  48,  // #2d2db4 -> #2d2db4
			/* [ 49] = */  49,  // #3737dc -> #3737dc
			/* [ 50] = */  50,  // #4040ff -> #4040ff
			/* [ 51] = */  51,  // #212187 -> #212187
			/* [ 52] = */  52,  // #645432 -> #645432
			/* [ 53] = */  53,  // #7b663e -> #7b663e
			/* [ 54] = */  54,  // #8f7748 -> #8f7748
			/* [ 55] = */  55,  // #4b3f26 -> #4b3f26
			/* [ 56] = */  56,  // #b4b1ac -> #b4b1ac
			/* [ 57] = */  57,  // #dcd9d3 -> #dcd9d3
			/* [ 58] = */  58,  // #fffcf5 -> #fffcf5
			/* [ 59] = */  59,  // #878581 -> #878581
			/* [ 60] = */  60,  // #985924 -> #985924
			/* [ 61] = */  61,  // #ba6d2c -> #ba6d2c
			/* [ 62] = */  62,  // #d87f33 -> #d87f33
			/* [ 63] = */  63,  // #72431b -> #72431b
			/* [ 64] = */  64,  // #7d3598 -> #7d3598
			/* [ 65] = */  65,  // #9941ba -> #9941ba
			/* [ 66] = */  66,  // #b24cd8 -> #b24cd8
			/* [ 67] = */  67,  // #5e2872 -> #5e2872
			/* [ 68] = */  68,  // #486c98 -> #486c98
			/* [ 69] = */  69,  // #5884ba -> #5884ba
			/* [ 70] = */  70,  // #6699d8 -> #6699d8
			/* [ 71] = */  71,  // #365172 -> #365172
			/* [ 72] = */  72,  // #a1a124 -> #a1a124
			/* [ 73] = */  73,  // #c5c52c -> #c5c52c
			/* [ 74] = */  74,  // #e5e533 -> #e5e533
			/* [ 75] = */  75,  // #79791b -> #79791b
			/* [ 76] = */  76,  // #599011 -> #599011
			/* [ 77] = */  77,  // #6db015 -> #6db015
			/* [ 78] = */  78,  // #7fcc19 -> #7fcc19
			/* [ 79] = */  79,  // #436c0d -> #436c0d
			/* [ 80] = */  80,  // #aa5974 -> #aa5974
			/* [ 81] = */  81,  // #d06d8e -> #d06d8e
			/* [ 82] = */  82,  // #f27fa5 -> #f27fa5
			/* [ 83] = */  83,  // #804357 -> #804357
			/* [ 84] = */  84,  // #353535 -> #353535
			/* [ 85] = */  85,  // #414141 -> #414141
			/* [ 86] = */  86,  // #4c4c4c -> #4c4c4c
			/* [ 87] = */  87,  // #282828 -> #282828
			/* [ 88] = */  88,  // #6c6c6c -> #6c6c6c
			/* [ 89] = */  89,  // #848484 -> #848484
			/* [ 90] = */  90,  // #999999 -> #999999
			/* [ 91] = */  91,  // #515151 -> #515151
			/* [ 92] = */  92,  // #35596c -> #35596c
			/* [ 93] = */  93,  // #416d84 -> #416d84
			/* [ 94] = */  94,  // #4c7f99 -> #4c7f99
			/* [ 95] = */  95,  // #284351 -> #284351
			/* [ 96] = */  96,  // #592c7d -> #592c7d
			/* [ 97] = */  97,  // #6d3699 -> #6d3699
			/* [ 98] = */  98,  // #7f3fb2 -> #7f3fb2
			/* [ 99] = */  99,  // #43215e -> #43215e
			/* [100] = */ 100,  // #24357d -> #24357d
			/* [101] = */ 101,  // #2c4199 -> #2c4199
			/* [102] = */ 102,  // #334cb2 -> #334cb2
			/* [103] = */ 103,  // #1b285e -> #1b285e
			/* [104] = */ 104,  // #483524 -> #483524
			/* [105] = */ 105,  // #58412c -> #58412c
			/* [106] = */ 106,  // #664c33 -> #664c33
			/* [107] = */ 107,  // #36281b -> #36281b
			/* [108] = */ 108,  // #485924 -> #485924
			/* [109] = */ 109,  // #586d2c -> #586d2c
			/* [110] = */ 110,  // #667f33 -> #667f33
			/* [111] = */ 111,  // #36431b -> #36431b
			/* [112] = */ 112,  // #6c2424 -> #6c2424
			/* [113] = */ 113,  // #842c2c -> #842c2c
			/* [114] = */ 114,  // #993333 -> #993333
			/* [115] = */ 115,  // #511b1b -> #511b1b
			/* [116] = */ 116,  // #111111 -> #111111
			/* [117] = */ 117,  // #151515 -> #151515
			/* [118] = */ 118,  // #191919 -> #191919
			/* [119] = */ 119,  // #0d0d0d -> #0d0d0d
			/* [120] = */ 120,  // #b0a836 -> #b0a836
			/* [121] = */ 121,  // #d7cd42 -> #d7cd42
			/* [122] = */ 122,  // #faee4d -> #faee4d
			/* [123] = */ 123,  // #847e28 -> #847e28
			/* [124] = */ 124,  // #409a96 -> #409a96
			/* [125] = */ 125,  // #4fbcb7 -> #4fbcb7
			/* [126] = */ 126,  // #5cdbd5 -> #5cdbd5
			/* [127] = */ 127,  // #307370 -> #307370
			/* [128] = */ 128,  // #345ab4 -> #345ab4
			/* [129] = */ 129,  // #3f6edc -> #3f6edc
			/* [130] = */ 130,  // #4a80ff -> #4a80ff
			/* [131] = */ 131,  // #274387 -> #274387
			/* [132] = */ 132,  // #009928 -> #009928
			/* [133] = */ 133,  // #00bb32 -> #00bb32
			/* [134] = */ 134,  // #00d93a -> #00d93a
			/* [135] = */ 135,  // #00721e -> #00721e
			/* [136] = */ 136,  // #5b3c22 -> #593c21
			/* [137] = */ 137,  // #6f4a2a -> #6d4929
			/* [138] = */ 138,  // #815631 -> #7f5530
			/* [139] = */ 139,  // #442d19 -> #432d19
			/* [140] = */ 140,  // #4f0100 -> #4f0100
			/* [141] = */ 141,  // #600100 -> #600100
			/* [142] = */ 142,  // #700200 -> #700200
			/* [143] = */ 143,  // #3b0100 -> #3b0100
			/* [144] = */  59,  // #937c71 -> #878581
			/* [145] = */  90,  // #b4988a -> #999999
			/* [146] = */  56,  // #d1b1a1 -> #b4b1ac
			/* [147] = */  45,  // #6e5d55 -> #606060
			/* [148] = */  43,  // #703919 -> #603818
			/* [149] = */  40,  // #89461f -> #814a21
			/* [150] = */ 138,  // #835d19 -> #7f5530
			/* [151] = */ 139,  // #542b13 -> #432d19
			/* [152] = */  83,  // #804357 -> #804357
			/* [153] = */  83,  // #804b5d -> #804357
			/* [154] = */  80,  // #95576c -> #aa5974
			/* [155] = */ 115,  // #511b1b -> #511b1b
			/* [156] = */  86,  // #4f4c61 -> #4c4c4c
			/* [157] = */  45,  // #605d77 -> #606060
			/* [158] = */  88,  // #706c8a -> #6c6c6c
			/* [159] = */  47,  // #3b3949 -> #3b3b3b
			/* [160] = */  60,  // #835d19 -> #985924
			/* [161] = */  61,  // #a0721f -> #ba6d2c
			/* [162] = */  62,  // #ba8524 -> #d87f33
			/* [163] = */ 137,  // #624613 -> #6d4929
			/* [164] = */ 108,  // #485225 -> #485924
			/* [165] = */ 109,  // #58642d -> #586d2c
			/* [166] = */ 110,  // #677535 -> #667f33
			/* [167] = */ 111,  // #363d1c -> #36431b
			/* [168] = */  43,  // #703637 -> #603818
			/* [169] = */  83,  // #8a4243 -> #804357
			/* [170] = */  80,  // #a04d4e -> #aa5974
			/* [171] = */ 139,  // #542829 -> #432d19
			/* [172] = */ 118,  // #281c18 -> #191919
			/* [173] = */ 107,  // #31231e -> #36281b
			/* [174] = */ 107,  // #392923 -> #36281b
			/* [175] = */ 117,  // #1e1512 -> #151515
			/* [176] = */  44,  // #5f4b45 -> #4f4f4f
			/* [177] = */  45,  // #745c54 -> #606060
			/* [178] = */  46,  // #876b62 -> #707070
			/* [179] = */  47,  // #473833 -> #3b3b3b
			/* [180] = */  85,  // #3d4040 -> #414141
			/* [181] = */  44,  // #4b4f4f -> #4f4f4f
			/* [182] = */  27,  // #575c5c -> #585858
			/* [183] = */  84,  // #2e3030 -> #353535
			/* [184] = */ 104,  // #56333e -> #483524
			/* [185] = */ 105,  // #693e4b -> #58412c
			/* [186] = */  54,  // #8f7748 -> #8f7748
			/* [187] = */ 107,  // #40262e -> #36281b
			/* [188] = */ 107,  // #352b40 -> #36281b
			/* [189] = */  47,  // #41354f -> #3b3b3b
			/* [190] = */  85,  // #4c3e5c -> #414141
			/* [191] = */  47,  // #3b3949 -> #3b3b3b
			/* [192] = */ 107,  // #352318 -> #36281b
			/* [193] = */ 139,  // #412b1e -> #432d19
			/* [194] = */ 104,  // #4c3223 -> #483524
			/* [195] = */ 118,  // #281a12 -> #191919
			/* [196] = */  84,  // #35391d -> #353535
			/* [197] = */ 111,  // #414624 -> #36431b
			/* [198] = */ 108,  // #4c522a -> #485924
			/* [199] = */  87,  // #282b16 -> #282828
			/* [200] = */ 112,  // #642a20 -> #6c2424
			/* [201] = */ 113,  // #7a3327 -> #842c2c
			/* [202] = */ 114,  // #8e3c2e -> #993333
			/* [203] = */ 115,  // #4b1f18 -> #511b1b
			/* [204] = */ 116,  // #1a0f0b -> #111111
			/* [205] = */ 117,  // #1f120d -> #151515
			/* [206] = */ 118,  // #251610 -> #191919
			/* [207] = */ 119,  // #130b08 -> #0d0d0d
			/* [208] = */ 113,  // #852122 -> #842c2c
			/* [209] = */ 114,  // #a3292a -> #993333
			/* [210] = */ 114,  // #bd3031 -> #993333
			/* [211] = */ 115,  // #641919 -> #511b1b
			/* [212] = */ 112,  // #682c44 -> #6c2424
			/* [213] = */ 113,  // #7f3653 -> #842c2c
			/* [214] = */  83,  // #943f61 -> #804357
			/* [215] = */ 115,  // #4e2133 -> #511b1b
			/* [216] = */ 115,  // #401114 -> #511b1b
			/* [217] = */ 115,  // #4f1519 -> #511b1b
			/* [218] = */ 115,  // #5c191d -> #511b1b
			/* [219] = */ 143,  // #300d0f -> #3b0100
			/* [220] = */  28,  // #0f585e -> #005700
			/* [221] = */ 127,  // #126c73 -> #307370
			/* [222] = */ 127,  // #167e86 -> #307370
			/* [223] = */  31,  // #0b4246 -> #004100
			/* [224] = */  92,  // #286462 -> #35596c
			/* [225] = */ 127,  // #327a78 -> #307370
			/* [226] = */ 124,  // #3a8e8c -> #409a96
			/* [227] = */  95,  // #1e4b4a -> #284351
			/* [228] = */ 107,  // #3c1f2b -> #36281b
			/* [229] = */  99,  // #4a2535 -> #43215e
			/* [230] = */  67,  // #562c3e -> #5e2872
			/* [231] = */ 118,  // #2d1720 -> #191919
			/* [232] = */ 135,  // #0e7f5d -> #00721e
			/* [233] = */ 132,  // #119b72 -> #009928
			/* [234] = */ 133,  // #14b485 -> #00bb32
			/* [235] = */  28,  // #0a5f46 -> #005700
			/* [236] = */  85,  // #464646 -> #414141
			/* [237] = */  27,  // #565656 -> #585858
			/* [238] = */  15,  // #646464 -> #686868
			/* [239] = */  84,  // #343434 -> #353535
			/* [240] = */  54,  // #987b67 -> #8f7748
			/* [241] = */   8,  // #ba967e -> #aea473
			/* [242] = */  56,  // #d8af93 -> #b4b1ac
			/* [243] = */  45,  // #725c4d -> #606060
		};

		return ((a_Colour < sizeof(Map) / sizeof(Map[0])) ? Map[a_Colour] : 0);
	}
}
